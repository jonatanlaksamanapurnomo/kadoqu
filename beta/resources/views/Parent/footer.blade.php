<div class="footer-wrapper style-1" style="margin-top: 140px;">
    <footer class="type-1">
        <div id="footer-web" class="footer-columns-entry">
            <a id="btn-open-help"><!-- <img class="gidahelp" src="asset/icon/icon_gidahelper.png"> --></a>
            <div class=" container footer-padding" style="padding:0 6%;">
                <div class="row">
                    <div class="col-md-5">
                        <img class="column-title logo" src="asset/img/logo_kadoqu.png" alt="" />
                    </div>
                    <div class="col-md-3">
                        <p class="column-title title-bottom">Shopping Guide</p>
                    </div>
                    <div class="col-md-4">
                        <p class="column-title title-bottom">NEWSletter</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <p>Kadoqu adalah online gift store pertama dan terbesar di indonesia yang menyediakan berbagai macam jenis kado bagi orang tersayang. Kadoqu memberikan kemudahan bagi para konsumen yang mencari kadi berkualitas, Lengkap dan dibuat khusus untuk memenuhi kebutuhan konsumen.</p>
                        <h3 class="column-title" style="margin-top: 30px">Contact US</h3>
                        <div class="row">
                            <div class="col-xs-1" style="text-align: center">
                                <p><i class="fa fa-map-marker fa-2x"></i></p>
                            </div>
                            <div class="col-xs-9">
                                <p class="line-height: 1.3" style="font-size: 15px;">Jl. Profesor Eyckman No.28 Pav. Pasteur, Sukajadi, Bandung, 40161. Jawa Barat, Indonesia 081322976000</p>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="col-md-3 col-md-offset-1">
                        <ul class="column">
                            <li><a href="{{url('faq')}}?openId=2">Info Pembayaran</a></li>
                            <li><a href="{{url('faq')}}?openId=10">Cara Pembelian</a></li>
                            <li><a href="{{url('faq')}}?openId=4">Cara Pengembalian</a></li>
                            <li><a href="{{url('faq')}}?openId=3">Info Pengiriman</a></li>
                            <li><a href="{{url('faq')}}?openId=4">Kebijakan Pengembailan</a></li>
                            <li><a href="{{url('faq')}}">FAQ</a></li>
                        </ul>
                        <div class="clear"></div>
                    </div>
                    <div class="col-md-4">
                        <div class="row" style="display: flex;justify-content:center; margin-bottom:  15px;margin-left: 0px">
                            <input id="subscribe-web" type="email" placeholder="Type Your Email" style="border: none;padding: 8px; float: right;width: 70%">
                            <a class="button style-7" onclick="subscribeMeWeb()" style="border: none;margin-left: 10px;margin-bottom:0px; padding: 8px; float: left ;width: 30%">subscribe</a>
                        </div>
                        <h3 class="column-title">Sosial Media</h3>

                        <a href="https://www.facebook.com/kadoqushop/" target="_blank">
                            <div class="icn-sosial col-md-4">
                                <i class="fa fa-facebook fa-lg icn-fa"></i>
                            </div>
                        </a>
                        <a href="https://www.instagram.com/kadoqu.store/" target="_blank">
                            <div class="icn-sosial col-md-4">
                                <i class="fa fa-instagram fa-lg icn-fa"></i>
                            </div>
                        </a>
                        <a href="https://wa.me/628112181600" target="_blank">
                            <div class="icn-sosial col-md-4">
                                <i class="fa fa-whatsapp  fa-lg icn-fa"></i>
                            </div>
                        </a>
                        <div class="clear" style="margin-bottom: 10px">
                        </div>
                        <div class="clear"></div>
                        <h3 class="column-title" style="margin-bottom: 10px;">Available Payment</h3>
                        <div class="cell-view">
                            <div class="payment-methods" style="text-align: left">
                                <a style="pointer-events: none;cursor: default;"><img class="logo-kombini" src="asset/payment/Indomaret.png" alt="" /></a>
                                <a style="pointer-events: none;cursor: default;"><img class="logo-kombini" src="asset/payment/ALFAMART_LOGO_BARU.png" alt="" /></a>
                            </div>
                            <div class="payment-methods">
                                <a style="pointer-events: none;cursor: default;"><img class="logo-bank" src="asset/payment/BCA-bank-logo-transparent-1024x318.png" alt="" /></a>
                                <a style="pointer-events: none;cursor: default;"><img class="logo-bank" src="asset/payment/Bank_Mandiri_logo.svg.png" alt="" /></a>
                                <a style="pointer-events: none;cursor: default;"><img class="logo-bank" src="asset/payment/Logo%20Bank%20BNI%20PNG.png" alt="" /></a>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer-mobile" class="footer-columns-entry">
            <div class="row text-center">
                <img class="logo" src="asset/img/logo_kadoqu.png">
                <div class="clear"></div>
                <p style="margin: 8px;font-size: 15px ;">Kadoqu adalah online gift store pertama dan terbesar di indonesia yang menyediakan berbagai macam jenis kado bagi orang tersayang. Kadoqu memberikan kemudahan bagi para konsumen yang mencari kado berkualitas, Lengkap dan dibuat khusus untuk memenuhi kebutuhan konsumen.</p>
                <div class="clear"></div>
                <p style="font-size: 18px;font-weight:700 ;margin: 5px ;color: #424242">Newsletter</p>
                <div class="clear"></div>
                <div class="row" style="display: flex;justify-content:center; margin:10px ">
                    <input id="subscribe-mobile" type="email" placeholder="Type Your Email" style="border: none;padding: 8px; float: right;width: 70%">
                    <a onclick="subscribeMeMobile()" class="button style-7" style="border: none;margin-left: 10px;margin-bottom:0px; padding: 8px; float: left ;width: 30%; z-index: 4;">subscribe</a>
                </div>
                <div class="clear"></div>
                <div class="row" style="display: flex;justify-content:center;">
                    <a href="https://www.facebook.com/kadoqushop/" target="_blank">
                        <div class="icn-sosial col-xs-4">
                            <i class="fa fa-facebook fa-lg icn-fa"></i>
                        </div>
                    </a>
                    <a href="https://www.instagram.com/kadoqu.store/" target="_blank">
                        <div class="icn-sosial col-xs-4">
                            <i class="fa fa-instagram fa-lg icn-fa"></i>
                        </div>
                    </a>
                    <a href="https://wa.me/628112181600" style="z-index: 4;" target="_blank">
                        <div class="icn-sosial col-xs-4">
                            <i class="fa fa-whatsapp  fa-lg icn-fa"></i>
                        </div>
                    </a>
                </div>
                <div class="clear"></div>
                <div class="row" style="display: flex;justify-content:center;">
                    <a style="font-size: 18px;font-weight:700 ;margin: 5px; float: right;color: #424242; cursor: pointer">Contact Us</a>
                    <a style="font-size: 18px;font-weight:700 ;margin: 5px;padding:0px 10px;border-right: 2px #333 solid; border-left: 2px #333 solid;color: #424242; cursor: pointer; z-index: 4;">Shoping Guide</a>
                    <a href="{{url('faq')}}" style="font-size: 18px;font-weight:700 ;margin: 5px; float: left;color: #424242; cursor: pointer; z-index: 4;">FAQ</a>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </footer>
</div>
<!--FOOTER-->
</div>
<!--FOOTER-->
<!--popup-->
<div class="search-box popup">
    <form action="product-category-grid?keyword=">
        <div class="search-box size-1 search-all">
            <div class="row search-mobile">
                <div class="col-sm-11 col-xs-11" style="padding: 0px">
                    <div class="search-field col-sm-12 col-xs-12" style="background: none">
                        <input name="keyword" type="text" value="" placeholder="Search for product" />
                    </div>
                </div>
                <div class="col-sm-1 col-xs-1" style="padding: 0px">
                    <div class="search-button icn-src col-sm-12 col-xs-12" style="background: none">
                        <i class="fa fa-search"></i>
                        <input type="submit" />
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<div class="cart-box popup" style="">
    <div class="popup-container user-popup">
        <div id="welcome">
            <img class="banner-img-acc" src="asset/login/welcome.png">
            <div class="row text-center" style="padding:30px 30px 25px 30px;">
                <p style="color:#00998D; font-weight: 600;line-height: 1.3; font-size: 20px;margin-bottom: 15px">Selamat Datang di Kadoqu.com</p>
                <p style=" font-weight: 400;line-height: 1.3; font-size: 12px;">Untuk mendapatkan kenyamanan berbelanaja silahkan pilih masuk atau daftar</p>
            </div>
            <div class="cart-buttons" style="display: flex;justify-content: center;align-items: center; padding-bottom: 20px">
                <div id="masuk" class="col-xs-5">
                    <a class="button style-3">Masuk</a>
                    <div class="clear"></div>
                </div>
                <div id="daftar" class="col-xs-5">
                    <a class="button style-4">Daftar</a>
                    <div class="clear"></div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <div id="form-content">
            <img class="banner-img-acc" src="asset/login/topborder.png">
            <div class="row" style="margin:10px 5px">
                <div id="isi-nya">
                    <div id="masuk-btn" class="col-md-3" style="border-right: 1px #9b9b9b solid;width: 80px;">Masuk</div>
                    <div id="daftar-btn" class="col-md-3" style="border-left: 1px #9b9b9b solid;">Daftar</div>
                    <div id="isi-login" class="col-xs-12" style="margin:10px 0px">
                        <form id="login-form">
                            <label>Email</label>
                            <input id="email-login" class="simple-field" type="email" placeholder="email anda" required value="" />
                            <div style="color: red; margin-top: -10%;" id="login-email-validation"></div>
                            <div class="clear"></div>
                            <label>Password</label>
                            <input id="password-login" class="simple-field" style="margin-bottom: 5px;" type="password" placeholder="password anda" required value="" />
                            <div style="color: red; margin-top: -3%;" id="login-password-validation"></div>
                            <div class="clear"></div>
                            <!-- <label class="checkbox-entry">
                                <span class="check"></span> Lupa password? <a href="#" style="color: #509FA8">Klik disini</a>
                            </label> -->
                            <div class="btn-center-align">
                                <div class="button style-3 col-xs-5" onclick="login_user()">Masuk</a></div>
                            </div>
                        </form>
                        <!-- <div class="garis"><i>atau masuk dengan</i>
                            <div class="line"></div>
                        </div>
                        <div class="cart-buttons btn-login-etc">
                            <div class="col-xs-5">
                                <a class="button facebook masuk-dgn"><i class="fa fa-facebook"></i></a>
                                <div class="clear"></div>
                            </div>
                            <div class="col-xs-5">
                                <a class="button google masuk-dgn"><i class="fa fa-google"></i></a>
                                <div class="clear"></div>
                            </div>
                            <div class="clear"></div>
                        </div> -->
                    </div>
                    <div id="isi-daftar" class="col-xs-12" style="margin:10px 0px; overflow: scroll;height: 500px;">
                        <form id="form-register">
                            <label>Nama</label>
                            <input class="simple-field" type="text" placeholder="nama anda" name="name" required value="" id="name" />
                            <div style="color: red; margin-top: -10%;" id="nama-validation"></div>
                            <div class="clear"></div>
                                <!-- <label>Nama Belakang</label>
                                    <input class="simple-field" type="text" placeholder="nama belakang anda" required value="" /> -->
                                    <div class="clear"></div>
                                    <label>Email</label>
                                    <input class="simple-field" type="email" placeholder="email anda" required value="" name="email" id="email" />
                                    <div style="color: red; margin-top: -10%;" id="email-validation"></div>
                                    <div class="clear"></div>
                                    <label>Password</label>
                                    <input class="simple-field" type="password" placeholder="password  anda" required value="" name="password" id="password" />
                                    <div style="color: red; margin-top: -10%;" id="password-validation"></div>
                                    <div class="clear"></div>
                                    <label>Konfirmasi Password</label>
                                    <input class="simple-field" style="margin-bottom: 5px;" type="password" placeholder="konfirmasi password anda" required value="" name="confirm_password" id="confirm_password" />
                                    <div style="color: red; margin-top: -3%;" id="confirm-password-validation"></div>
                                    <div class="clear"></div>
                                    <label>Alamat</label>
                                    <input class="simple-field" type="text" placeholder="alamat anda" name="alamat" required value="" id="alamat" />
                                    <div style="color: red; margin-top: -10%;" id="alamat-validation"></div>
                                    <div class="clear"></div>
                                    <label>No Telepone</label>
                                    <input class="simple-field" type="text" placeholder="Telepon anda" name="no_telp" required value="" id="no_telp" />
                                    <div style="color: red; margin-top: -10%;" id="no-telp-validation"></div>
                                    <div class="clear"></div>
                                    <label class="checkbox-entry">
                                        <input type="checkbox" /> <span class="check"></span> Beritahu saya promo terbaru
                                    </label>
                                    <div style="display: flex;justify-content: center;align-items: center;">
                                        <div  class="button style-4 col-xs-5">Daftar<input type="button" onclick="send()" value="" /></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="user-tab" class="row" style="margin: 0px 5px">
                            <div class="col-xs-12" style="padding:0 0 10px 0 ;border-bottom: 1px #f3f3ee solid">
                                <div class="col-xs-3" style="text-align: center;">
                                    <div id="ganti-photo" class="profile-image">
                                        <img src="asset/profile/avatar_adikcowo.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-9">
                                    <p class="user-name">Nama Pengguna</p>
                                    <div class="clear"></div>
                                    <button class="button style-7" style="min-width: 70px; padding: 4px;margin-top: 10px;" onclick="destroy_token()">Keluar</button>
                                </div>
                            </div>
                            <div class="clear"></div>
                            <ul class="menu-user">
                                <li>
                                    <a href="profile.html">Edit Data Pengguna</a>
                                </li>
                                <li>
                                    <a href="favorit.html">Produk Favorit</a>
                                </li>
                                <li>
                                    <a href="calender.html">Kalender Perayaan</a>
                                </li>
                                <li>
                                    <a href="status%20pembelian.html">Status Pembelian</a>
                                </li>
                                <li>
                                    <a href="riwayat%20belanja.html">Riwayat Belanja</a>
                                </li>
                                <li>
                                    <a href="#">FAQ</a>
                                </li>
                            </ul>
                        </div>
                        <div id="select-profile" style="padding:10px 30px;min-height: 200px;max-height: 200px;overflow-y: auto;">
                            <div class="row">
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_adikcewe.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_adikcowo.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_ayah.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_cucuanakcewe.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_cucuanakcowo.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_ibu.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_istri.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_kakakcewe.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_kakakcowo.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_kakek.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_nenek.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_pacarcewe.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_pacarcowo.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_suami.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_temancewe.jpg">
                                    </div>
                                </div>
                                <div class="col-xs-4" style="text-align: center;">
                                    <div class="select-profile-image">
                                        <img src="asset/profile/avatar_temancowo.jpg">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <img class="banner-img-acc" src="asset/login/bottomborder.png">
                </div>
            </div>
        </div>
        <div id="mySidecart" class="cartside row" style="margin: 0px">
            <div class="col-lg-8 col-sm-4 col-xs-2" onclick="closecart()" style="min-height: 100% ;">
            </div>
            <div class="col-lg-4 col-sm-8 col-xs-10" style="min-height: 100% ;background: #fff; padding: 0px">
                <div style=" width: 100% ;height: 20px ;background: #80e1cf"></div>
                <div class="clear"></div>
                <div id="cart-inner">
                    <div class="row" style="margin: 15px ;border-bottom: 1px #f3f3ee solid; padding-bottom: 5px">
                        <div class="col-xs-3">
                            <div style="position: relative;">
                                <img style="float: right" class="ico-cart" src="asset/icon/icon_cart%201.png" alt="" />
                                <div id="jumlah-barang2">
                                    <!-- Here                                     -->
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-9">
                            <p class="judulcart">Isi Keranjang</p>
                        </div>
                    </div>
                    <div style="overflow: auto;height: 80%; margin-bottom: 20%">
                        <div class="traditional-cart-entry style-1 isi-cart-kanan">
                            <!-- <div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;">
                                <div class="col-md-2 col-xs-2">
                                    <div style="background-image:url(asset/icon/icon_kado.png);width: 29px; height: 35px;background-size: cover; padding-right: 0px; padding-left: 0px; text-align: center"><i class="rincian-nomer">1</i></div>
                                </div>
                                <div class="col-md-7 col-xs-6 rincian-text">
                                    Gift 1 - Jasa Bungkus
                                </div>
                                <div class="col-md-3 col-xs-4 rincian-rp">
                                    Rp.5000
                                </div>
                            </div> -->
                            <div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;" id="detail-pemesanan-guests"></div>
                            <div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;" id="detail-pemesanan-users"></div>
                                <!-- <div class="col-md-3" style="text-align: center"><img src="asset/icon/icon_kado.png"></div>
                                <div class="col-md-6 col-xs-8">
                                    <h5 class="detail-barang" id="detail-barang">Lidah Kucing</h5>
                                    <h5 class="detail-barang" id="detail-harga">Rp.50000</h5>
                                    <div class="quantity-selector detail-info-entry detail-barang" style="">
                                        <div class="entry number-minus ">&nbsp;</div>
                                        <div class="entry number" id="jumlah-barang">10</div>
                                        <div class="entry number-plus ">&nbsp;</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-xs-4" style="text-align: right">
                                    <h5 class="rincian-rp">Rp.50000</h5>
                                </div> -->
                        </div>
                    </div>
                </div>
                <a id="checkout-button" href="{{url('shop-cart')}}" class="button style-7" style="line-height: normal;margin-bottom: 0px; font-size: 30px; position: absolute ;height: 52px ;bottom: 0px;right: 0px;width: 100%">
                    Checkout
                </a>
            </div>
        </div>
        <!-- Modal content -->
        <div id="gida-help" class="modal-isi  col-md-3" style="padding: 0px">
            <div class="chat-header">
                <span class="close-chat"><i class="fa fa-minus"></i></span>GIDA LiveChat
            </div>
            <div style="border-bottom: 1px #029a91 solid">
                <div class="gida-photo"></div>
                <p class="sub-gida p-1">Hello My Name is GIDA</p>
                <p class="sub-gida p-2">I am here to help...</p>
            </div>
            <div class="modal-body">
                <div style="height: auto">
                    <div class="row">
                        <div class="col-md-2">
                            <div style="height: 30px;width: 30px; background: #333"></div>
                        </div>
                        <div class="col-md-10" style="padding-left: 0px">
                            <div class="chat">
                                <p>GIDA</p>
                                <p class="isi">Hai.. Ada yang bisa saya bantu?</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <textarea rows="1" placeholder="type your text here...."></textarea>
            </div>
        </div>
        <!--popup-->
        <script src="{{asset('js/jquery-2.1.3.min.js')}}"></script>
        <script src="{{asset('js/my.js')}}"></script>
        <script src="{{asset('js/idangerous.swiper.min.js')}}"></script>
        <script src="{{asset('js/global.js')}}"></script>
        <!-- custom scrollbar -->
        <script src="{{asset('js/jquery.mousewheel.js')}}"></script>
        <script src="{{asset('js/jquery.jscrollpane.min.js')}}"></script>
        <script src="{{asset('js/js.cookie.min.js')}}"></script>
        <script src="{{asset('js/sweetalert2.all.min.js')}}"></script>
        <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
        <script>
            var talkabotlivechat = {
                url: 'https://your-staging.talklogics.co/user/5b8e043c31e1380004315b5f?c=gida-green',
            };
            $( document ).ready(function() {
            $('.gida-chat-btn2').css('height','150px'); 
            });  
        </script>
        <script src="https://your-staging.talklogics.co/public/livetalk/gida-engine.js"></script>
        <script type="text/javascript">
            function userMiddleware() {
                var cekToken = Cookies.get('token');
                if (cekToken == undefined) {
                    // location.href="{{url('/')}}";
                    $('#content-block').hide();
                    setTimeout(function(){
                        $('.gida-chat-btn').hide();
                    }, 2300);
                    Swal({
                      title: 'Please login First !',
                      text: "",
                      imageUrl: '{{asset("asset/gida/gida_1.png")}}',
                      imageWidth: 200,
                      imageHeight: 200,
                      showCancelButton: false,
                      confirmButtonColor: '#00968a',
                      allowOutsideClick: false,
                    }).then((result) => {
                      if (result.value) {
                        location.href="{{url('/')}}";
                      }
                    });
                }
            }
        </script>
        <script type="text/javascript">
        //search auto complete
        $('#search-box').on('keyup', function() {
            var keyword = $('input[name=keyword]').val();
            // console.log($('input[name=keyword]').val());
            $('#list-search').html("");
            $('#brandlist').html("");
            $.ajax({
                url: `https://admin.kadoqu.com/api/products?keyword=${keyword}`,
                type: 'GET',
                dataType: 'json',
                success: (data) => {
                    let listsearch;
                    let tampungBrand = [];
                    let brandlist;
                    $.each(data, function(index, val) {
                        // console.log(val.category_store_1.kategoriStore);
                        tampungBrand.push({"idBrand" : val.brand.idBrand, "nameBrand" : val.brand.nameBrand});
                        if (listsearch != undefined) {
                            listsearch = listsearch+ `<a class="header-functionality-entry m-l-10px" href="product-detail?id=${val.SKU}" style="padding: 0;"><div style="width: 100%;height: 10px;text-align: left;margin-top: 10px;word-spacing: 4px;"> ${val.namaProduk.substr(0,26)}...</div></a>`;
                        } else {
                            listsearch = `<a class="header-functionality-entry m-l-10px" href="product-detail?id=${val.SKU}" style="padding: 0;"><div style="width: 100%;height: 10px;text-align: left;margin-top: 10px;word-spacing: 4px;"> ${val.namaProduk.substr(0,26)}...</div></a>`;
                        }
                    });
                    var obj = {};
                    for ( var i=0, len=tampungBrand.length; i < len; i++ )
                        obj[tampungBrand[i]['nameBrand']] = tampungBrand[i];
                    tampungBrand= new Array();
                    for ( var key in obj )
                        tampungBrand.push(obj[key]);
                    $.each(tampungBrand, function(index, val) {
                        if(brandlist != undefined) {
                            brandlist = brandlist + `<a class="header-functionality-entry m-l-10px" href="product-category-grid?Brandid=${val.idBrand}" style="padding: 0;"><div style="width: 100%;height: 10px;text-align: left;margin-top: 10px;word-spacing: 4px;font-size: 17px;">${val.nameBrand}</div></a>`;
                        } else {
                            brandlist =`<a class="header-functionality-entry m-l-10px" href="product-category-grid?Brandid=${val.idBrand}" style="padding: 0;"><div style="width: 100%;height: 10px;text-align: left;margin-top: 10px;word-spacing: 4px;font-size: 17px;">${val.nameBrand}</div></a>`;
                        }
                    });

                    $('#list-search').html(listsearch);
                    $('#brand-seacrh').html(brandlist);
                    $('.dropdown-search').addClass('act-me');
                }
            });
        });
        // $('input[name=keyword]').focus(function() {
        //     $('.dropdown-search').addClass('act-me');
        // });
        $('input[name=keyword]').blur(function() {
            $('.dropdown-search').removeClass('act-me');
        });
        function subscribeMeWeb(){
            var emailweb = $('#subscribe-web').val();
            $.ajax({
                url: 'https://admin.kadoqu.com/api/subscribe',
                type: 'POST',
                dataType: 'json',
                data: {email: emailweb},
            })
            .done(function() {
                swal({
                    title: 'Terimakasih telah Subscribe Kadoqu.com :)',
                    type: 'success'
                });
            })
            .fail(function(data) {
                swal({
                    title: data.responseJSON.error.email[0],
                    type: 'warning'
                });
            });
            
        }
        function subscribeMeMobile() {
            var emailmobile = $('#subscribe-mobile').val();
            $.ajax({
                url: 'https://admin.kadoqu.com/api/subscribe',
                type: 'POST',
                dataType: 'json',
                data: {email: emailmobile},
            })
            .done(function() {
                swal({
                    title: 'Terimakasih telah Subscribe Kadoqu.com :)',
                    type: 'success'
                });
            })
            .fail(function(data) {
                swal({
                    title: data.responseJSON.error.email[0],
                    type: 'warning'
                });
            })
            .always(function() {
                console.log("complete");
            });
        }
        function showCat() {
            $('#submenu').slideToggle('slow/400/fast');
        }
        var listdata = '';
        //Kadoqu GIFT
        $.ajax({
            url: 'https://admin.kadoqu.com/api/gift_category',
            type: 'GET',
            dataType: 'json',
            data: 'json',
            success: (data) => {
                $.each(data, (index, el) => {
                    if (index <=4) {
                     listdata = '<div class="submenu-list-title"><a href="product-category-grid?Giftid='+el.idKategoriGift+'">'+el.nameKategoriGift+'</a></div><div class="clear"></div>' ;
                     $('#kadoqugift1').append(listdata);
                 } if (index >=5) {
                     listdata = '<div class="submenu-list-title"><a href="product-category-grid?Giftid='+el.idKategoriGift+'">'+el.nameKategoriGift+'</a></div><div class="clear"></div>' ;
                     $('#kadoqugift2').append(listdata);
                 }
             });
            },
        });
        // Kadoqu STORE
        $.ajax({
            url: "https://admin.kadoqu.com/api/store_category",
            type : "GET" ,
            data : "JSON",
            dataType: 'json',
            success: (data) => {
                $.each(data, (index, el) => {
                    if (index <=5) {
                     listdata = '<div class="submenu-list-title"><a href="product-category-grid?Storeid='+el.idKategoriStore+'">'+el.kategoriStore+'</a></div><div class="clear"></div>' ;
                     $('#kadoqustore1').append(listdata);
                 } if (index >=6) {
                     listdata = '<div class="submenu-list-title"><a href="product-category-grid?Storeid='+el.idKategoriStore+'">'+el.kategoriStore+'</a></div><div class="clear"></div>' ;
                     $('#kadoqustore2').append(listdata);
                 }
             });
            },
        });
    </script>

    <!-- User Api Process -->
    <script type="text/javascript">
    //Jumlah Barang
    var kuantitas = 0;

    //Register
    function send () {
        var nama = $('#name').val();
        var email = $('#email').val();
        var password = $('#password').val();
        var confirm_password = $('#confirm_password').val();
        var alamat = $('#alamat').val();
        var no_telp = $('#no_telp').val();
        
        if (nama == "") {$('#nama-validation').html('nama is required')} 
        else if (nama != "") {$('#nama-validation').html('')}
        if (email == "") {$('#email-validation').html('email is required')}
        else if (email != "") {$('#email-validation').html('')}
        if (password == "") {$('#password-validation').html('password is required')} 
        else if (password != "") {$('#password-validation').html('')}
        if (confirm_password == "") {$('#confirm-password-validation').html('confirm password is required')} 
        else if (confirm_password != "") {$('#confirm-password-validation').html('')}
        if (alamat == "") {$('#alamat-validation').html('alamat is required')} 
        else if (alamat != "") {$('#alamat-validation').html('')}
        if (no_telp == "") {$('#no-telp-validation').html('no telp is required')} 
        else if (no_telp != "") {$('#no-telp-validation').html('')}

        $.ajax({
            url: 'https://admin.kadoqu.com/api/register',
            type: 'POST',
            dataType: 'json',
            data:{
              name : nama,
              email: email,
              password: password,
              confirm_password : confirm_password,
              alamat : alamat,
              no_telp : no_telp
            },
        })
        .done(function() {
            swal(
            'Good job!',
            'You has been registered',
            'success'
          );
            location.reload();
            $('#form-register')[0].reset();
        })
        .fail(function(e) {
             var errors = JSON.parse(e.responseText);
             // console.log(errors)
             if (errors['error'].name) {
                $('#nama-validation').html(errors['error'].name[0]);
             } else {
                $('#nama-validation').html("");
             } if (errors['error'].confirm_password) {
                $('#confirm-password-validation').html(errors['error'].confirm_password[0]);
             } else {
                $('#confirm-password-validation').html("");
             } if (errors['error'].email) {
                $('#email-validation').html(errors['error'].email[0]);
             } else {
                $('#email-validation').html("");
             } if (errors['error'].alamat) {
                $('#alamat-validation').html(errors['error'].alamat[0]);
             } else {
                $('#alamat-validation').html("");
             } if (errors['error'].no_telp) {
                $('#no-telp-validation').html(errors['error'].no_telp[0]);
             } else {
                $('#no-telp-validation').html("");
             }

        });
        
    }

    //LOGIN USER
    function login_user () {
      var email = $('#email-login').val();
      var password = $('#password-login').val();

      if (email == "") {$('#login-email-validation').html('email is required')}
      else if (email != "") {$('#login-email-validation').html('')}
      if (password == "") {$('#login-password-validation').html('password is required')}
      else if (password != "") {$('#login-password-validation').html('')}

      $.ajax({
      url: "https://admin.kadoqu.com/api/login",
      type: 'POST',
      data:{
        email: email,
        password: password
      },
      success: function(data, status) {
        getDetails(data.success.token);
        Cookies.set('token',data.success.token);
        return console.log("The returned data", data.success.token);
      }
      }).done(function() {
        console.log("success");
        location.href="{{url('/')}}";
      })
      .fail(function(e) {
        var errors = JSON.parse(e.responseText);
        if(errors['error']){
            if (email == "") {
                $('#login-email-validation').html('email is required');
            } else {
                $('#login-password-validation').html('Your email or password is incorrect');
            }
        }
      });
    }

    //Convert to rupiahh 
    function convertToRupiah(angka) {
        angka = angka.replace(/\.00/,'');
        var rupiah = '';
        var angkarev = angka.toString().split('').reverse().join('');
        for (var i = 0; i < angkarev.length; i++) if (i % 3 == 0) rupiah += angkarev.substr(i, 3) + ',';
        return 'Rp. ' + rupiah.split('', rupiah.length - 1).reverse().join('');
    }
    function plus(sku,index){
        kuantitas++;
        var currentValue = parseInt($(`#tampilkanu-${index}`).html());
        $(`#tampilkanu-${index}`).html(parseInt(currentValue) + 1);
        cartUpdate(`${sku}`,`${index}`);
        if ( $(`#tampilkanu-${index}`).html() >= 0 ) {
            $(`#btn_minus_min-${index}`).css("pointer-events","auto");
        }
        $('.jumlah-barang1').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
        $('#jumlah-barang2').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
    }
    function minus(sku,index){
        kuantitas--;
        if (kuantitas <= 1) {
            $(`#btn_minus_min-${index}`).css("pointer-events","none");
        }
        var currentValue = $(`#tampilkanu-${index}`).html();
        $(`#tampilkanu-${index}`).html(parseInt(currentValue) - 1);
        cartUpdate(`${sku}`,`${index}`); 
        if ( $(`#tampilkanu-${index}`).html() <= 1 ) {
            $(`#btn_minus_min-${index}`).css("pointer-events","none");
        }
        $('.jumlah-barang1').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
        $('#jumlah-barang2').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
        if(currentValue == 1){
            location.reload();
        }
    }

    //token cart
    function showCart(token) {
        $.ajax({
            url: 'https://admin.kadoqu.com/api/details',
            type: 'POST',
            dataType: 'json',
            crossDomain: true,
            headers: {
                'Authorization': `Bearer ${token}`,
            },
            success: (data) => {
                let listdata = '';
                var total = 0;
                var total_index = 0;
                $('#data-here').html("");
                $.each(data.success.cart, function(index, el) {
                    // console.log(el);
                    var jumlah = 0;
                    let namaProdukValidation;
                    if (el.product.stock.available == 0) {
                        namaProdukValidation = `${el.product.namaProduk}<br><b>(Stock Produk Habis)</b>`;
                    } else {
                        namaProdukValidation = `${el.product.namaProduk}`;
                    }
                    let validationPlusUserCart;
                    if (el.jumlah < el.product.stock.available) {
                        validationPlusUserCart = `<div class="entry number-plus" id="btn-plus-${index}" data-sku='${el.SKU}' data-indeks='${index}'>&nbsp;</div>`;
                    } else {
                        validationPlusUserCart = `<div class="entry number-plus" id="btn-plus-${index}" data-sku='${el.SKU}' data-indeks='${index}' style="pointer-events: none;">&nbsp;</div>`;
                    }
                    let validationMinusUserCart;
                    if (el.jumlah <= 1) {
                        validationMinusUserCart = `<div class="entry number-minus" id="btn_minus-${index}" data-sku='${el.SKU}' data-indeks='${index}' style="pointer-events: none;">&nbsp;</div>`;
                    } else {
                        validationMinusUserCart = `<div class="entry number-minus" id="btn_minus-${index}" data-sku='${el.SKU}' data-indeks='${index}'>&nbsp;</div>`;
                    }
                    total_index++;
                    jumlah = parseInt(el.total_harga);
                    total+=jumlah;
                    
                    listdata = listdata + 
                    `<tr class="thead-item-T" style="border: 1px #e6e6e6 solid;">
                        <td></td>
                        <td>` +
                         // <div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;">
                         //        <div class="col-md-3" style="background-image:url(asset/icon/icon_kado.png);width: 29px; height: 35px;background-size: cover; padding-right: 0px; padding-left: 0px; text-align: center ;margin-right: 10px"><i class="rincian-nomer">1</i></div>
                         //    </div>
                        `</td>
                        <td class=" text-left">`+
                            // <h5 class="rincian-text">Gift 1 - Jasa Bungkus</h5>
                        `</td>
                        <td class=" text-center"></td>
                        <td class=" text-center"></td>
                        <td class=" text-right"></td>
                    </tr>
                    <tr class="border-hide" style="border: 1px #e6e6e6 solid;">
                    <td>
                    <i class="fa fa-trash" style="padding-top:10px;font-size:35px;color:gainsboro; cursor:pointer;margin-left: 15px;" onclick="removeCartUser('${token}','${el.SKU}')"></i>
                    </td>
                    <td style="padding-left: 0px;">
                        <img style="width: 120px;max-width:100%;" src="https://admin.kadoqu.com/produk/${el.product.images[0].gambar}">
                    </td>
                        <td class="text-left" style="font-size:20px;font-family:arial;">
                            ${namaProdukValidation}
                        </td>
                        <td class="text-center" style="font-size:20px;font-family:arial;">${convertToRupiah(el.product.hargaJual)}</td>
                        <td class="text-center" style="padding:0 !important;">
                            <div class="quantity-selector detail-info-entry detail-barang" style="">
                                <div class="entry number-minus" id="btn_minus-${index}" data-sku='${el.SKU}' data-indeks='${index}'>&nbsp;</div>
                                <div class="entry number jumlahstock" data-namaproduk='${el.product.namaProduk}' id="tampil-${index}" data-indeks='${index}' data-stock='${el.product.stock.available}'>${el.jumlah}</div>
                                <div class="entry number-plus" id="btn-plus-${index}" data-sku='${el.SKU}' data-indeks='${index}'>&nbsp;</div>
                            </div>
                        </td>
                        <td class="text-right" style="width: 175px;font-size:20px;font-family:arial" id="harga_total-${index}" data-total="${el.total_harga}" data-harga="${el.product.hargaJual}">${convertToRupiah(jumlah.toString())}</td>
                        <div class="clear"></div>
                    </tr>`;

                });
                $('#subtotal').html(convertToRupiah(total.toString()));
                $('#total-keseluruhan').html(convertToRupiah(total.toString()));
                $('#data-here').html(listdata);
                $('#data-here').on('click','.number-plus',function(){
                    kuantitas++;
                    var harga = $(`#harga_total-${$(this).data("indeks")}`).data("harga");
                    var currentValue = $(`#tampil-${$(this).data('indeks')}`).html();
                    var stock = $(`#tampil-${$(this).data('indeks')}`).data("stock");
                    if(parseInt(currentValue) < stock){
                        $(`#tampil-${$(this).data('indeks')}`).html(parseInt(currentValue) + 1);
                        UpdateCart(`${$(this).data('sku')}`,`${$(this).data('indeks')}`);
                        var subtotal = harga * (parseInt(currentValue) + 1);
                        $(`#harga_total-${$(this).data("indeks")}`).data("total",subtotal) ;
                        $(`#harga_total-${$(this).data("indeks")}`).html(convertToRupiah(subtotal.toString()));
                        updateTotal(total_index);
                    } else {
                        // var batas = $(`#btn-plus-${$(this).data('indeks')}`).css('pointer-events','none');
                        // console.log(currentValue);
                    }
                                        
                });
                $('#data-here').on('click','.number-minus',function(){
                    kuantitas--;
                    var harga = $(`#harga_total-${$(this).data("indeks")}`).data("harga");                    
                    var currentValue = $(`#tampil-${$(this).data('indeks')}`).html();
                    if ( parseInt($(`#tampil-${$(this).data('indeks')}`).html()) <= 1 ) {
                        $(`#tampil-${$(this).data('indeks')}`).html(parseInt(currentValue) + 0);
                    }else{
                        $(`#btn-plus-${$(this).data('indeks')}`).css('pointer-events','auto');
                        $(`#tampil-${$(this).data('indeks')}`).html(parseInt(currentValue) - 1);
                        UpdateCart(`${$(this).data('sku')}`,`${$(this).data('indeks')}`);
                        var subtotal = harga * (parseInt(currentValue) - 1);
                        $(`#harga_total-${$(this).data("indeks")}`).data("total",subtotal);
                        $(`#harga_total-${$(this).data("indeks")}`).html(convertToRupiah(subtotal.toString()));
                    }
                    updateTotal(parseInt(total_index));
                });                
            },
        });
    }
    // end token cart

    //GET DETAIL USER VIA TOKEN
    function getDetails(token){
        $.ajax({
          url: "https://admin.kadoqu.com/api/details",
          headers: {
            'Authorization': `Bearer ${token}`,
          },
          type: 'POST',
          crossDomain : true,
          success: function(data, status) {
            // console.log(data.success.cart);
            $('#detail-pemesanan-users').html("");
            if (data.success) {
                // console.log(data.success);
                $('#user-name').text(data.success.name);
                $('#poto-profil-user').html('<img src="https://admin.kadoqu.com/'+data.success.images+'">');
                $('.poto-profil-user-mobile').html('<img src="https://admin.kadoqu.com/'+data.success.images+'">');

                //Total Barang di Cart
                let total = 0;
                let pemesanan ='';
                var total_index = 0;
                $.each(data.success.cart, function(index, el) {
                    total_index++;
                    // console.log(el.product.stock.available);
                    let validationPlusUser;
                    if (el.jumlah < el.product.stock.available) {
                        validationPlusUser = `<div class="entry number-plus" data-sku='${el.SKU}' data-indeks='${index}'" onclick="plus('${el.SKU}','${index}')">&nbsp;</div>`;
                    } else {
                        validationPlusUser = `<div class="entry number-plus" data-sku='${el.SKU}' data-indeks='${index}'" style="pointer-events:none;">&nbsp;</div>`;
                    }
                    let validationMinusUser;
                    if (el.jumlah <= 1) {
                        validationMinusUser = `<div class="entry number-minus" id="btn_minus_min-${index}" data-indeks='${index}' style="pointer-events: none;">&nbsp;</div>`;
                    } else {
                        validationMinusUser = `<div class="entry number-minus" id="btn_minus_min-${index}" data-indeks='${index}' data-sku='${el.SKU}'" onclick="minus('${el.SKU}','${index}')">&nbsp;</div>`;
                    }
                    total += el.jumlah;
                    var sku = el.SKU;
                    pemesanan = pemesanan + `
                                <div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;">
                                    <div class="col-md-3" style="text-align: center"><img style="width: 100%;" src="https://admin.kadoqu.com/produk/${el.product.images[0].gambar}"></div>
                                    <div class="col-md-6 col-xs-8">
                                        <h5 class="detail-barang" id="detail-barang">${el.product.namaProduk}</h5>
                                        <h5 class="detail-barang" id="detail-harga">${convertToRupiah(el.product.hargaJual.toString())}</h5>
                                        <div class="quantity-selector detail-info-entry detail-barang" style="">
                                            ${validationMinusUser}
                                            <div class="entry number updathe" id="tampilkanu-${index}">${el.jumlah}</div>
                                            ${validationPlusUser}
                                            <i class="fa fa-trash" style="padding-top:10px;font-size:20px;cursor:pointer;" onclick="removeCartUser('${token}','${el.SKU}')"></i>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-xs-4" style="text-align: right">`+
                                        // <h5 class="rincian-rp">Rp.50000</h5>
                                    `</div>
                                </div>`;
                });
                $('#detail-pemesanan-users').html("");
                $('#detail-pemesanan-users').html(pemesanan);
                if ($('#detail-pemesanan-users').children().length == 0) {
                    $('#checkout-button').css({
                        "pointer-events" : "none",
                        "color" : "rgba(192,192,192,0.3)"
                    });
                    $('#checkout-button-final').css({
                        "pointer-events" : "none",
                        "color" : "rgba(192,192,192,0.3)"
                    });
                } else {
                    $('#checkout-button').css("pointer-events","auto");
                }
                kuantitas = total;
                if (data.success.cart.length) {
                    $('.jumlah-barang1').html(`<div class="cart-float-label type-1"><span style="display: block">${total}</span></div>`);
                    $('#jumlah-barang2').html(`<div class="cart-float-label type-1"><span style="display: block">${total}</span></div>`);
                } else {
                    $('.jumlah-barang1').replaceWith('');
                    $('#jumlah-barang2').replaceWith('');
                }

            } else {
                // Kosongin Aja 
            }
            // return console.log("Hasil getDetails", data);
          },
        }); 
    }

    //remove Cart User
    function removeCartUser(token,sku) {
        swal({
          title: 'Apa anda yakin?',
          text: "ingin menghapus produk ini dari keranjang anda?",
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#0ca297',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Ya',
          cancelButtonText: 'Tidak',
          reverseButtons: true
        }).then((result) => {
          if (result.value) {
            swal({
              title: 'Dihapus!',
              text: "Barang anda telah berhasil dihapus dari cart",
              type: 'success',
              confirmButtonColor: '#0ca297',
            });
            $.ajax({
            url: 'https://admin.kadoqu.com/api/removefromcart',
            type: 'POST',
            dataType: 'json',
            headers: {
                'Authorization': `Bearer ${token}`,
            },
            data: {SKU: sku},
        })
        .done(function() {
            showCart(token);
            getDetails(token);
            // location.reload() -> sebelum di tambah getDetails
        });
          }
        });
    }
    //End Remove Cart User

    //Set Cookies for user
    var token = Cookies.get('token');

    function cookies(token) {
      Cookies.set('token', ''+token+'', { expires: 1 } );
    }

    function cek_token() {
      Cookies.get('token');
      getDetails(token);
      $('#details').text("Token is " +token+ " ");
      // console.log(Cookies.get('token'));
      var cek = Cookies.get('token');
      if (typeof cek == 'undefined') {
        cartGuests();
        if ($('#detail-pemesanan-guests').children().length == 0) {
            $('#checkout-button').css({
                "pointer-events" : "none",
                "color" : "rgba(192,192,192,0.3)"
            });
            $('#checkout-button-final').css({
                "pointer-events" : "none",
                "color" : "rgba(192,192,192,0.3)"
            });
        } else {
            $('#checkout-button').css("pointer-events","auto");
        }
      } if (typeof cek != 'undefined') {
        // console.log('ada');
        $('#welcome').replaceWith(
            `<img class="banner-img-acc" src="asset/login/topborder.png">
                <div class="col-xs-12" style="padding:0 0 10px 0 ;border-bottom: 1px #f3f3ee solid">
                            <div class="col-xs-3" style="text-align: center;">
                                <div class="profile-image" id="poto-profil-user">
                                    
                                </div>
                            </div>
                            <div class="col-xs-9">
                                <p class="user-name" id="user-name">Nama Pengguna</p>
                                <div class="clear"></div>
                                <button class="button style-7" style="min-width: 70px; padding: 4px;margin-top: 10px;" onclick="destroy_token()">Keluar</button>
                            </div>
                        </div>
                        <div class="clear"></div>
                        <ul class="menu-user">
                            <li>
                                <a href="{{url('user-profile')}}">Edit Data Pengguna</a>
                            </li>` +
                            // <li>
                            //     <a href="{{url('daftar-favorit')}}">Produk Favorit</a>
                            // </li>
                            `<li>
                                <a href="{{url('event-reminder')}}">Kalender Perayaan</a>
                            </li>
                            <li>
                                <a href="{{url('riwayat-belanja')}}">Status Pembelian</a>
                            </li>
                            <li>
                                <a href="{{url('riwayat-belanja')}}">Riwayat Belanja</a>
                            </li>
                            <li>
                                <a href="{{url('faq')}}">FAQ</a>
                            </li>
                        </ul>
                <img class="banner-img-acc" src="asset/login/bottomborder.png">`
            );
        $('.mo-1').replaceWith(`<a href="javascript:void(0)" class="mobile-nav nav-vi" onclick="destroy_token()">LOGOUT</a>`);
        $('.mo-2').hide();
      }
    }
    cek_token();

    function destroy_token() {
      Cookies.remove('token');
      location.href = '{{url("/")}}';
    }

    // memisahkan update cart guest dan user
    function cartUpdate(sku,index) {
        // alert(parseInt($(`#tampilkanu-${index}`).html()));
        var token = Cookies.get('token');
        var sku = sku;
        var index = parseInt($(`#tampilkanu-${index}`).html());
        if (token != undefined) {
            cartUpdateUser(token,sku,index);
        } else {
            editCart();
        }
    }

    //update cart user
    function cartUpdateUser(token,sku,index) {
        $.ajax({
            url: 'https://admin.kadoqu.com/api/editproduct',
            type: 'POST',
            dataType: 'json',
            headers: {
                'Authorization': `Bearer ${token}`,
            },
            data: {
                SKU: sku,
                jumlah: index
            },
            success: function(data){
                getDetails(token);
            }
        });
    }

    //update cart guest
    Cookies.json = true;
    function editCart(sku,jumlah,index){
        guest = Cookies.get('guest');
        index = guest.map(function(e) { return e.SKU; }).indexOf(sku);
        if(jumlah < 1){
            $(`#btn-minus-guest-${$(this).data('tambah')}`).css("pointer-events","auto");
        }else{
            guest[index].jumlah = jumlah;
        }
        Cookies.set('guest',guest);
        cartGuests();
        cartGuest();
    }
    function removeCartGuestWithBtn(sku,jumlah){
        swal({
          title: 'Apa anda yakin?',
          text: "ingin menghapus produk ini dari keranjang anda?",
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#0ca297',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Ya',
          cancelButtonText: 'Tidak',
          reverseButtons: true
        }).then((result) => {
          if (result.value) {
            swal({
              title: 'Dihapus!',
              text: "Barang anda telah berhasil dihapus dari cart",
              type: 'success',
              confirmButtonColor: '#0ca297',
            });
            guest = Cookies.get('guest');
            index = guest.map(function(e) { return e.SKU; }).indexOf(sku);
            if(jumlah == 0){
                guest.splice(index,1);
            }else{
                guest[index].jumlah = jumlah;
            }
            Cookies.set('guest',guest);
            cartGuests();
            cartGuest();
          }
        });
    }
    //Cart Guests
    function cartGuests(){
        var me = Cookies.getJSON('guest');
        let total = 0;
        let pemesanan ='';
        if (me) {
            $('#detail-pemesanan-guests').html("");
            $.each(me, function(index, el) {
            // console.log(el.stock);
            let validationPlus;
            if (parseInt(el.jumlah) < parseInt(el.stock)) {
                validationPlus = `<div class="entry number-plus" id="btn-plus-guest-${index}" onclick='editCart("${el.SKU}","${parseInt(el.jumlah) + 1}","${index}")'>&nbsp;</div>`;
            } else {
                validationPlus = `<div class="entry number-plus" id="btn-plus-guest-${index}" style="pointer-events: none;">&nbsp;</div>`;
            }
            let validationMinus;
            if (parseInt(el.jumlah) <= 1) {
                validationMinus = `<div class="entry number-minus" style="pointer-events: none;">&nbsp;</div>`;
            } else {
                validationMinus = `<div class="entry number-minus" id="btn-minus-guest-${index}" data-tambah='${index}' onclick='editCart("${el.SKU}","${parseInt(el.jumlah) - 1}","${index}")'>&nbsp;</div>`;
            }
            total += parseInt(el.jumlah);
            pemesanan = pemesanan + `<div class="row rincian-row" style="margin-right: 0px; margin-left: 0px;">
                            <div class="col-md-3" style="text-align: center"><img style="width: 100%;" src="https://admin.kadoqu.com/produk/${el.fotoProduk}"></div>
                            <div class="col-md-6 col-xs-8">
                                <h5 class="detail-barang" id="detail-barang">${el.namaProduk}</h5>
                                <h5 class="detail-barang" id="detail-harga">${convertToRupiah(el.hargaProduk)}</h5>
                                <div class="quantity-selector detail-info-entry detail-barang" style="">
                                    ${validationMinus}
                                    <div class="entry number edited" id="tampilkan-${index}">${el.jumlah}</div>
                                    ${validationPlus}
                                    <i class="fa fa-trash" style="padding-top:10px;font-size:20px;cursor:pointer;" onclick="removeCartGuestWithBtn('${el.SKU}',0)"></i>
                                </div>
                            </div>
                            <div class="col-md-3 col-xs-4" style="text-align: right">
                                <h5 class="rincian-rp"></h5>
                            </div>
                        </div>`;            
        });
        $('#detail-pemesanan-guests').html(pemesanan);
        if ($('#detail-pemesanan-guests').children().length == 0) {
            $('#checkout-button').css({
                "pointer-events" : "none",
                "color" : "rgba(192,192,192,0.3)"
            });
            $('#checkout-button-final').css({
                "pointer-events" : "none",
                "color" : "rgba(192,192,192,0.3)"
            });
        } else {
            $('#checkout-button').css("pointer-events","auto");
        }
        if (me.length) {
            $('.jumlah-barang1').html(`<div class="cart-float-label type-1"><span style="display: block">${total}</span></div>`);
            $('#jumlah-barang2').html(`<div class="cart-float-label type-1"><span style="display: block">${total}</span></div>`);
        } else {
            $('.jumlah-barang1').replaceWith('');
            $('#jumlah-barang2').replaceWith('');
        }
        } else {
            // console.log('false'); kosongin ajah
        }
        
      }
      function updateTotal(index){
            $('.jumlah-barang1').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
            $('#jumlah-barang2').html(`<div class="cart-float-label type-1"><span style="display: block">${kuantitas}</span></div>`);
            var total = 0;
            for(let i=0;i<index;i++){
                total += parseInt($(`#harga_total-${i}`).data('total'));
            }
            $("#subtotal").html(convertToRupiah(total.toString()));
            $("#total-keseluruhan").html(convertToRupiah(total.toString()));
        }
      function removeCookiesGuest() {
        Cookies.remove('guest');
        location.reload();
      }


</script>
    @yield('scripts')
</body>

</html>